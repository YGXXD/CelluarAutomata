set(IMAGE_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR})
set(IMAGE_OUTPUT_DIR ${CMAKE_CURRENT_BINARY_DIR})

file(GLOB IMAGE_SOURCE_FILES ${IMAGE_SOURCE_DIR}/*.png)

foreach(IMAGE IN LISTS IMAGE_SOURCE_FILES) 
	get_filename_component(FILENAME ${IMAGE} NAME)
	add_custom_command(
		OUTPUT ${IMAGE_OUTPUT_DIR}/${FILENAME}
		COMMAND cp ${IMAGE} ${IMAGE_OUTPUT_DIR}/${FILENAME}
		DEPENDS ${IMAGE}
		COMMENT "Package ${FILENAME}")
		list(APPEND IMAGES ${IMAGE_OUTPUT_DIR}/${FILENAME})
endforeach(IMAGE IN LISTS IMAGE_SOURCE_FILES)

add_custom_target(images ALL DEPENDS ${IMAGES})
add_dependencies(${PROJECT_NAME} images)
target_compile_definitions(${PROJECT_NAME} PUBLIC IMAGE_PATH=\"${IMAGE_OUTPUT_DIR}/\")